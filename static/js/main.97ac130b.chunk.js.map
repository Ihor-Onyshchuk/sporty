{"version":3,"sources":["assets/images/loadIndicators/load-indicator.gif","components/Promo/Promo.js","components/ClubCard/ClubCard.js","components/AnimatedCard/AnimatedCard.js","components/ClubList/ClubList.js","components/common/ButtonSwitcher/ButtonSwitcher.js","components/LoadingIndicator/LoadingIndicator.js","api/index.js","services/clubs.js","App.js","index.js"],"names":["module","exports","Promo","className","ClubCard","club","title","logo","title_short","link","style","href","target","rel","src","alt","AnimatedCard","Card","card","cardProps","index","from","scale","to","config","delay","duration","springProps","ClubList","clubs","map","key","ButtonSwitcher","options","active","onChange","role","option","isActive","slug","cx","type","onClick","LoadingIndicator","loadingIndicator","http","axios","create","baseURL","keys","object","Object","allOption","getOptions","list","dictionary","getCitiesOptions","citiesList","forEach","city","groupedByCity","activitiesList","activity","getActitvitiesList","clubsByCity","clubList","push","clubByCity","groupedDataByCity","reduce","memo","cityClubs","cityActivitiesSlugs","cityActivities","Array","Set","activities","all","fetchClubs","get","then","data","citiesOptions","App","state","selectedCity","selectedActivity","loading","error","getClubs","setState","catch","handleFilterClubs","filter","some","handleCityChange","handleActivityChange","this","isLoaded","hasError","filteredClubs","PureComponent","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97ac130b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/load-indicator.bd85ac8c.gif\";","import React from 'react';\n\nconst Promo = () => (\n  <div className=\"card bg-light mb-5\">\n    <div className=\"card-header\">\n      <h1>Запись на тренировки онлайн</h1>\n    </div>\n    <div className=\"card-body\">\n      <h5 className=\"card-title\">На нашем сайте вы сможете:</h5>\n      <ul className=\"card-text ml-4\">\n        <li>Узнать расписание тренировок в спортивных клубах</li>\n        <li>Записаться на тренировку</li>\n        <li>Выбрать абонемент и оплатить его кредитной картой</li>\n      </ul>\n    </div>\n  </div>\n);\n\nexport default Promo;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport './ClubCard.scss';\n\nconst ClubCard = ({ club: { title, logo, title_short, link }, style }) => (\n  <div className=\"card shadow club-card \" style={style}>\n    <a\n      title={title}\n      href={link}\n      target=\"_blank\"\n      rel=\"noopener noreferrer nofollow\"\n      className=\"stretched-link text-decoration-none outline-none\"\n    />\n    <div className=\"logo-wrapper\">\n      <img src={logo} className=\"card-img-top card-logo\" alt={title_short} />\n    </div>\n    <div className=\"card-body text-center\">\n      <p className=\"card-title text-truncate\">\n        {title}\n      </p>\n    </div>\n  </div >\n)\n\nClubCard.propTypes = {\n  club: T.shape({\n    title: T.string,\n    logo: T.string,\n    title_short: T.string,\n    link: T.string\n  }).isRequired\n}\n\nexport default ClubCard;\n","import React from 'react'\nimport T from 'prop-types'\nimport { Spring } from 'react-spring/renderprops'\n\n\nconst AnimatedCard = ({ card: Card, cardProps, index = 0 }) => {\n  return (\n    <Spring\n      from={{ scale: '0' }}\n      to={{ scale: '1' }}\n      config={{ delay: index * 100, duration: 300 }}\n    >\n      {springProps => (\n        <Card {...cardProps} style={springProps} />\n      )}\n    </Spring>\n  )\n}\n\nAnimatedCard.propTypes = {\n  card: T.elementType.isRequired,\n  cardProps: T.object.isRequired,\n  index: T.number\n}\n\nexport default AnimatedCard\n","import React from 'react';\nimport T from 'prop-types';\n\nimport ClubCard from '../ClubCard/ClubCard';\nimport AnimatedCard from '../AnimatedCard/AnimatedCard'\n\nconst ClubList = ({ clubs = [] }) => (\n  <div className=\"row row-cols-1 row-cols-md-2 row-cols-xl-3 my-3\">\n    {clubs.map((club, index) => (\n      <div className=\"col mb-4\" key={club.title}>\n        <AnimatedCard card={ClubCard} cardProps={{ club }} index={index} />\n      </div>\n    ))}\n  </div>\n)\n\nClubList.propTypes = {\n  clubs: T.arrayOf(T.object),\n};\n\nexport default ClubList;\n\n","import React from 'react';\nimport cx from 'classnames';\nimport T from 'prop-types';\n\nimport './ButtonSwitcher.scss';\n\nconst ButtonSwitcher = ({ options, active, onChange, className }) => (\n  <div className=\"btn-group d-flex flex-wrap my-3\" role=\"group\">\n    {options.map(option => {\n      const isActive = active === option.slug;\n      return (\n        <button\n          key={option.slug}\n          className={cx('btn-sm category-btn m-1', className, { active: isActive })}\n          type=\"button\"\n          onClick={() => (isActive ? null : onChange(option.slug))}\n        >\n          {option.title}\n        </button>\n      );\n    })}\n  </div>\n)\n\nButtonSwitcher.propTypes = {\n  options: T.arrayOf(T.shape({\n    slug: T.string,\n    title: T.string\n  })).isRequired,\n  active: T.string.isRequired,\n  onChange: T.func.isRequired,\n  className: T.string,\n};\n\nexport default ButtonSwitcher;","import React from 'react';\n\nimport './LoadingIndicator.scss';\nimport loadingIndicator from '../../assets/images/loadIndicators/load-indicator.gif';\n\nconst LoadingIndicator = () => (\n  <div className=\"load-indicator\">\n    <img className=\"load-img\" src={loadingIndicator} alt=\"\" />\n    <div className=\"load-bg\" />\n  </div>\n);\n\nexport default LoadingIndicator;\n\n","import axios from 'axios';\n\nexport const http = axios.create({\n  baseURL: 'https://instasport.co/dashboard/api/v1'\n});","import { http } from '../api';\n\nconst keys = (object) => Object.keys(object);\nconst allOption = { slug: 'all', title: 'Все' };\n\nconst getOptions = (list, dictionary) => list.map(slug => ({\n  slug,\n  title: dictionary[slug]\n}));\n\nconst getCitiesOptions = (clubs) => {\n  const citiesList = {};\n  clubs.forEach(({ city: { slug, title } }) => citiesList[slug] = title);\n  return [\n    allOption,\n    ...getOptions(keys(citiesList), citiesList)\n  ]\n}\n\nconst getActitvitiesList = (clubs) => {\n  const activitiesList = {};\n  clubs.forEach(({ activity }) => {\n    activity.forEach(({ slug, title }) => activitiesList[slug] = title);\n  });\n  return activitiesList;\n}\n\nconst clubByCity = (clubs) => {\n  const clubList = {};\n  clubs.forEach(club => {\n    const city = club.city.slug;\n    clubList[city] ? clubList[city].push(club) : clubList[city] = [club];\n  });\n  return clubList;\n}\n\nconst groupedByCity = (clubs) => {\n  const activitiesList = getActitvitiesList(clubs);\n  const clubsByCity = clubByCity(clubs);\n\n  const groupedDataByCity = keys(clubsByCity).reduce((memo, city) => {\n    const cityClubs = clubsByCity[city];\n\n    const cityActivitiesSlugs = [];\n    cityClubs.forEach(({ activity }) => {\n      activity.forEach(({ slug }) => cityActivitiesSlugs.push(slug));\n    });\n    const cityActivities = [\n      allOption,\n      ...getOptions(Array.from(new Set(cityActivitiesSlugs)), activitiesList)\n    ]\n\n    return ({\n      ...memo,\n      [city]: {\n        clubs: cityClubs,\n        activities: cityActivities\n      }\n    })\n  }, {})\n\n  return {\n    all: {\n      clubs,\n      activities: [\n        allOption,\n        ...getOptions(keys(activitiesList), activitiesList)\n      ]\n    },\n    ...groupedDataByCity\n  }\n}\n\nexport const fetchClubs = () => http.get('/clubs')\n  .then(({ data }) => ({\n    citiesOptions: getCitiesOptions(data),\n    groupedByCity: groupedByCity(data)\n  }));\n\n","import React, { PureComponent } from 'react';\n\nimport Promo from './components/Promo/Promo';\nimport ClubList from './components/ClubList/ClubList';\nimport ButtonSwitcher from './components/common/ButtonSwitcher/ButtonSwitcher';\nimport LoadingIndicator from './components/LoadingIndicator/LoadingIndicator';\n\nimport { fetchClubs } from './services/clubs';\n\nimport './assets/scss/index.scss';\n\nclass App extends PureComponent {\n  state = {\n    citiesOptions: [],\n    groupedByCity: {},\n    selectedCity: 'all',\n    selectedActivity: 'all',\n    loading: true,\n    error: false\n  };\n\n  componentDidMount() {\n    this.getClubs();\n  }\n\n  getClubs = () => {\n    fetchClubs()\n      .then(({ citiesOptions, groupedByCity }) => {\n        this.setState({\n          citiesOptions,\n          groupedByCity,\n          loading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          error: true,\n          loading: false\n        });\n      })\n  }\n\n  handleFilterClubs = (clubs, selectedActivity) => {\n    if (selectedActivity === 'all') return clubs;\n    return clubs.filter(({ activity }) => activity.some(({ slug }) => slug === selectedActivity));\n  }\n\n  handleCityChange = (selectedCity) => {\n    this.setState({\n      selectedCity,\n      selectedActivity: 'all'\n    });\n  }\n\n  handleActivityChange = (selectedActivity) => {\n    this.setState({ selectedActivity });\n  }\n\n  render() {\n    const {\n      selectedCity,\n      selectedActivity,\n      groupedByCity,\n      citiesOptions,\n      loading,\n      error\n    } = this.state;\n\n    const isLoaded = !loading && !error;\n    const hasError = !loading && error;\n    const filteredClubs = isLoaded ? this.handleFilterClubs(groupedByCity[selectedCity].clubs, selectedActivity) : [];\n\n    return (\n      <div className=\"container\">\n        {loading && <LoadingIndicator />}\n        {hasError && (\n          <div className='text-center alert alert-danger mt-3' role=\"alert\">\n            Something occurred wrong, please reload the page\n          </div>)}\n        {isLoaded && (\n          <>\n            <Promo />\n            <ButtonSwitcher\n              onChange={this.handleCityChange}\n              active={selectedCity}\n              options={citiesOptions}\n              className=\"border-primary\"\n            />\n            <hr />\n            <ButtonSwitcher\n              onChange={this.handleActivityChange}\n              active={selectedActivity}\n              options={groupedByCity[selectedCity].activities}\n              className=\"border-success\"\n            />\n            <hr />\n            <ClubList clubs={filteredClubs} />\n            <hr />\n          </>\n        )}\n      </div >\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './assets/scss/index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}