{"version":3,"sources":["assets/load-indicator.gif","components/Promo/Promo.js","api/index.js","services/clubs.js","components/ClubCard/ClubCard.js","components/ClubList/ClubList.js","components/common/ButtonSwitcher.js","components/LoadingIndicator/LoadingIndicator.js","App.js","index.js"],"names":["module","exports","Promo","class","http","axios","create","baseURL","keys","object","Object","getOptions","list","dictionary","map","slug","title","getCitiesOption","clubs","citiesList","forEach","city","groupedByCity","activitiesList","activity","getActitvitiesList","clubsByCity","clubList","club","push","clubByCity","groupedDataByCity","reduce","memo","cityClubs","cityActivitiesSlugs","cityActivities","Array","from","Set","activities","all","fetchClubs","get","then","data","citiesOption","ClubCard","logo","title_short","link","className","href","target","rel","src","alt","ClubList","key","ButtonSwitcher","options","active","onChange","role","option","isActive","cx","type","onClick","LoadingIndicator","loadingIndicator","App","state","selectedCity","selectedActivity","loading","error","getClubs","setState","catch","handleFilterClubs","filter","some","handleCityChange","handleActivityChange","this","isLoaded","hasError","filteredClubs","PureComponent","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a09a0e32.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/load-indicator.bd85ac8c.gif\";","import React from 'react';\n\nconst Promo = () => (\n  <div class=\"card bg-light mb-5\">\n    <div class=\"card-header\">\n      <h1>Запись на тренировки онлайн</h1>\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">На нашем сайте вы сможете:</h5>\n      <ul class=\"card-text ml-4\">\n        <li>Узнать расписание тренировок в спортивных клубах</li>\n        <li>Записаться на тренировку</li>\n        <li>Выбрать абонемент и оплатить его кредитной картой</li>\n      </ul>\n    </div>\n  </div>\n)\n\nexport default Promo;\n","import axios from 'axios';\n\nexport const http = axios.create({\n  baseURL: 'https://instasport.co/dashboard/api/v1'\n});","import { http } from '../api';\n\nconst keys = (object) => Object.keys(object);\n\nconst getOptions = (list, dictionary) => list.map(slug => ({\n  slug,\n  title: dictionary[slug]\n}));\n\nconst getCitiesOption = (clubs) => {\n  const citiesList = {};\n  clubs.forEach(({ city: { slug, title } }) => citiesList[slug] = title);\n  return [\n    { slug: 'all', title: 'Все' },\n    ...getOptions(keys(citiesList), citiesList)\n  ]\n}\n\nconst getActitvitiesList = (clubs) => {\n  const activitiesList = {};\n  clubs.forEach(({ activity }) => {\n    activity.forEach(({ slug, title }) => activitiesList[slug] = title);\n  });\n  return activitiesList;\n}\n\nconst clubByCity = (clubs) => {\n  const clubList = {};\n  clubs.forEach(club => {\n    const city = club.city.slug;\n    clubList[city] ? clubList[city].push(club) : clubList[city] = [club];\n  });\n  return clubList;\n}\n\nconst groupedByCity = (clubs) => {\n  const activitiesList = getActitvitiesList(clubs);\n  const clubsByCity = clubByCity(clubs);\n\n  const groupedDataByCity = keys(clubsByCity).reduce((memo, city) => {\n    const cityClubs = clubsByCity[city];\n\n    const cityActivitiesSlugs = [];\n    cityClubs.forEach(({ activity }) => {\n      activity.forEach(({ slug }) => cityActivitiesSlugs.push(slug));\n    });\n    const cityActivities = [\n      { slug: 'all', title: 'Все' },\n      ...getOptions(Array.from(new Set(cityActivitiesSlugs)), activitiesList)\n    ]\n\n    return ({\n      ...memo,\n      [city]: {\n        clubs: cityClubs,\n        activities: cityActivities\n      }\n    })\n  }, {})\n\n  return {\n    all: {\n      clubs,\n      activities: [\n        { slug: 'all', title: 'Все' },\n        ...getOptions(keys(activitiesList), activitiesList)\n      ]\n    },\n    ...groupedDataByCity\n  }\n}\n\nexport const fetchClubs = () => http.get('/clubs')\n  .then(({ data }) => ({\n    citiesOption: getCitiesOption(data),\n    groupedByCity: groupedByCity(data)\n  }));\n\n","import React from 'react';\nimport T from 'prop-types';\n\nimport '../../assets/scss/ClubCard.scss';\n\nconst ClubCard = ({ club: { title, logo, title_short, link } }) => (\n  <div className=\"card shadow club-card\">\n    <a\n      href={link}\n      target=\"_blank\"\n      rel=\"noopener noreferrer nofollow\"\n      className=\"stretched-link text-decoration-none outline-none\"\n    />\n    <div className=\"logo-wrapper\">\n      <img src={logo} className=\"card-img-top card-logo\" alt={title_short} />\n    </div>\n    <div className=\"card-body text-center\">\n      <p className=\"card-title\">\n        {title}\n      </p>\n    </div>\n  </div >\n)\n\nClubCard.propTypes = {\n  logo: T.string,\n  link: T.string,\n  title: T.string,\n  title_short: T.string,\n};\n\nexport default ClubCard;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport ClubCard from '../ClubCard/ClubCard';\n\nconst ClubList = ({ clubs }) => (\n  <div className=\"row row-cols-1 row-cols-md-3 my-3\">\n    {clubs.map(club => (\n      <div className=\"col-12 col-md-6 col-xl-4 mb-4\" key={club.title}>\n        <ClubCard club={club} />\n      </div>))}\n  </div>\n)\n\nClubList.propTypes = {\n  clubs: T.arrayOf(T.object).isRequired,\n  className: T.string,\n};\n\nexport default ClubList;\n\n","import React from 'react';\nimport cx from 'classnames';\nimport T from 'prop-types';\n\nimport '../../assets/scss/ButtonSwitcher.scss';\n\nconst ButtonSwitcher = ({ options, active, onChange, className }) => (\n  <div className=\"btn-group d-flex flex-wrap my-3\" role=\"group\">\n    {options.map(option => {\n      const isActive = active === option.slug;\n      return (\n        <button\n          key={option.slug}\n          className={cx('btn-sm category-btn m-1', className, { active: isActive })}\n          type=\"button\"\n          onClick={() => (isActive ? null : onChange(option.slug))}\n        >\n          {option.title}\n        </button>\n      );\n    })}\n  </div>\n)\n\nButtonSwitcher.propTypes = {\n  options: T.arrayOf(T.shape({\n    slug: T.string,\n    title: T.string\n  })).isRequired,\n  active: T.string.isRequired,\n  onChange: T.func.isRequired,\n  className: T.string,\n};\n\nexport default ButtonSwitcher;","import React from 'react';\n\nimport '../../assets/scss/LoadingIndicator.scss';\nimport loadingIndicator from '../../assets/load-indicator.gif';\n\nconst LoadingIndicator = () => (\n  <div className=\"d-inline-block load-indicator\">\n    <img className=\"load-img\" src={loadingIndicator} alt=\"loading\" />\n    <div className=\"load-bg\"></div>\n  </div>\n);\n\nexport default LoadingIndicator;\n\n","import React, { PureComponent } from 'react';\n\nimport './assets/scss/index.scss';\nimport Promo from './components/Promo/Promo';\nimport { fetchClubs } from './services/clubs';\nimport ClubList from './components/ClubList/ClubList';\nimport ButtonSwitcher from './components/common/ButtonSwitcher';\nimport LoadingIndicator from './components/LoadingIndicator/LoadingIndicator';\n\nclass App extends PureComponent {\n  state = {\n    citiesOption: [],\n    groupedByCity: {},\n    selectedCity: 'all',\n    selectedActivity: 'all',\n    loading: true,\n    error: false\n  };\n\n  componentDidMount() {\n    this.getClubs();\n  }\n\n  getClubs = () => {\n    fetchClubs()\n      .then(({ citiesOption, groupedByCity }) => {\n        this.setState({ citiesOption, groupedByCity, loading: false });\n      })\n      .catch(() => {\n        this.setState({ error: true, loading: false });\n      })\n  }\n\n  handleFilterClubs = (clubs, selectedActivity) => {\n    if (selectedActivity === 'all') return clubs;\n    return clubs.filter(({ activity }) => activity.some(({ slug }) => slug === selectedActivity));\n  }\n\n  handleCityChange = (selectedCity) => {\n    this.setState({ selectedCity, selectedActivity: 'all' });\n  }\n\n  handleActivityChange = (selectedActivity) => {\n    this.setState({ selectedActivity });\n  }\n\n  render() {\n    const {\n      selectedCity,\n      selectedActivity,\n      groupedByCity,\n      citiesOption,\n      loading,\n      error\n    } = this.state;\n\n    const isLoaded = !loading && !error;\n    const hasError = !loading && error;\n    const filteredClubs = isLoaded ? this.handleFilterClubs(groupedByCity[selectedCity].clubs, selectedActivity) : [];\n    return (\n      <div className=\"container\">\n        {loading && <LoadingIndicator />}\n        {hasError && (\n          <div className='text-center alert alert-danger mt-3' role=\"alert\">\n            Something occurred wrong, please reload the page\n          </div>)}\n        {isLoaded && (\n          <>\n            <Promo />\n            <ButtonSwitcher\n              onChange={this.handleCityChange}\n              active={selectedCity}\n              options={citiesOption}\n              className=\"border-primary\"\n            />\n            <hr />\n            <ButtonSwitcher\n              onChange={this.handleActivityChange}\n              active={selectedActivity}\n              options={groupedByCity[selectedCity].activities}\n              className=\"border-success\"\n            />\n            <hr />\n            <ClubList clubs={filteredClubs} />\n          </>\n        )}\n      </div >\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './assets/scss/index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}