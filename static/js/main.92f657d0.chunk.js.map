{"version":3,"sources":["assets/load-indicator.gif","components/Promo/Promo.js","components/ClubCard/ClubCard.js","components/ClubList/ClubList.js","components/common/ButtonSwitcher.js","components/LoadingIndicator/LoadingIndicator.js","api/index.js","services/clubs.js","App.js","index.js"],"names":["module","exports","Promo","class","ClubCard","club","title","logo","title_short","link","className","href","target","rel","src","alt","ClubList","clubs","map","key","ButtonSwitcher","options","active","onChange","role","option","isActive","slug","cx","type","onClick","LoadingIndicator","loadingIndicator","http","axios","create","baseURL","keys","object","Object","getOptions","list","dictionary","getCitiesOption","citiesList","forEach","city","groupedByCity","activitiesList","activity","getActitvitiesList","clubsByCity","clubList","push","clubByCity","groupedDataByCity","reduce","memo","cityClubs","cityActivitiesSlugs","cityActivities","Array","from","Set","activities","all","fetchClubs","get","then","data","citiesOption","App","state","selectedCity","selectedActivity","loading","error","getClubs","setState","catch","handleFilterClubs","filter","some","handleCityChange","handleActivityChange","this","isLoaded","hasError","filteredClubs","PureComponent","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.92f657d0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/load-indicator.bd85ac8c.gif\";","import React from 'react';\n\nconst Promo = () => (\n  <div class=\"card bg-light mb-5\">\n    <div class=\"card-header\">\n      <h1>Запись на тренировки онлайн</h1>\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">На нашем сайте вы сможете:</h5>\n      <ul class=\"card-text ml-4\">\n        <li>Узнать расписание тренировок в спортивных клубах</li>\n        <li>Записаться на тренировку</li>\n        <li>Выбрать абонемент и оплатить его кредитной картой</li>\n      </ul>\n    </div>\n  </div>\n)\n\nexport default Promo;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport '../../assets/scss/ClubCard.scss';\n\nconst ClubCard = ({ club: { title, logo, title_short, link } }) => (\n  <div className=\"card shadow club-card\">\n    <a\n      href={link}\n      target=\"_blank\"\n      rel=\"noopener noreferrer nofollow\"\n      className=\"stretched-link text-decoration-none outline-none\"\n    />\n    <div className=\"logo-wrapper\">\n      <img src={logo} className=\"card-img-top card-logo\" alt={title_short} />\n    </div>\n    <div className=\"card-body text-center\">\n      <p className=\"card-title\">\n        {title}\n      </p>\n    </div>\n  </div >\n)\n\nClubCard.propTypes = {\n  logo: T.string,\n  link: T.string,\n  title: T.string,\n  title_short: T.string,\n};\n\nexport default ClubCard;\n","import React from 'react';\nimport T from 'prop-types';\n\nimport ClubCard from '../ClubCard/ClubCard';\n\nconst ClubList = ({ clubs }) => (\n  <div className=\"row row-cols-1 row-cols-md-3 my-3\">\n    {clubs.map(club => (\n      <div className=\"col-12 col-md-6 col-xl-4 mb-4\" key={club.title}>\n        <ClubCard club={club} />\n      </div>))}\n  </div>\n)\n\nClubList.propTypes = {\n  clubs: T.arrayOf(T.object).isRequired,\n  className: T.string,\n};\n\nexport default ClubList;\n\n","import React from 'react';\nimport cx from 'classnames';\nimport T from 'prop-types';\n\nimport '../../assets/scss/ButtonSwitcher.scss';\n\nconst ButtonSwitcher = ({ options, active, onChange, className }) => (\n  <div className=\"btn-group d-flex flex-wrap my-3\" role=\"group\">\n    {options.map(option => {\n      const isActive = active === option.slug;\n      return (\n        <button\n          key={option.slug}\n          className={cx('btn-sm category-btn m-1', className, { active: isActive })}\n          type=\"button\"\n          onClick={() => (isActive ? null : onChange(option.slug))}\n        >\n          {option.title}\n        </button>\n      );\n    })}\n  </div>\n)\n\nButtonSwitcher.propTypes = {\n  options: T.arrayOf(T.shape({\n    slug: T.string,\n    title: T.string\n  })).isRequired,\n  active: T.string.isRequired,\n  onChange: T.func.isRequired,\n  className: T.string,\n};\n\nexport default ButtonSwitcher;","import React from 'react';\n\nimport '../../assets/scss/LoadingIndicator.scss';\nimport loadingIndicator from '../../assets/load-indicator.gif';\n\nconst LoadingIndicator = () => (\n  <div className=\"d-inline-block load-indicator\">\n    <img className=\"load-img\" src={loadingIndicator} alt=\"loading\" />\n    <div className=\"load-bg\"></div>\n  </div>\n);\n\nexport default LoadingIndicator;\n\n","import axios from 'axios';\n\nexport const http = axios.create({\n  baseURL: 'https://instasport.co/dashboard/api/v1'\n});","import { http } from '../api';\n\nconst keys = (object) => Object.keys(object);\n\nconst getOptions = (list, dictionary) => list.map(slug => ({\n  slug,\n  title: dictionary[slug]\n}));\n\nconst getCitiesOption = (clubs) => {\n  const citiesList = {};\n  clubs.forEach(({ city: { slug, title } }) => citiesList[slug] = title);\n  return [\n    { slug: 'all', title: 'Все' },\n    ...getOptions(keys(citiesList), citiesList)\n  ]\n}\n\nconst getActitvitiesList = (clubs) => {\n  const activitiesList = {};\n  clubs.forEach(({ activity }) => {\n    activity.forEach(({ slug, title }) => activitiesList[slug] = title);\n  });\n  return activitiesList;\n}\n\nconst clubByCity = (clubs) => {\n  const clubList = {};\n  clubs.forEach(club => {\n    const city = club.city.slug;\n    clubList[city] ? clubList[city].push(club) : clubList[city] = [club];\n  });\n  return clubList;\n}\n\nconst groupedByCity = (clubs) => {\n  const activitiesList = getActitvitiesList(clubs);\n  const clubsByCity = clubByCity(clubs);\n\n  const groupedDataByCity = keys(clubsByCity).reduce((memo, city) => {\n    const cityClubs = clubsByCity[city];\n\n    const cityActivitiesSlugs = [];\n    cityClubs.forEach(({ activity }) => {\n      activity.forEach(({ slug }) => cityActivitiesSlugs.push(slug));\n    });\n    const cityActivities = [\n      { slug: 'all', title: 'Все' },\n      ...getOptions(Array.from(new Set(cityActivitiesSlugs)), activitiesList)\n    ]\n\n    return ({\n      ...memo,\n      [city]: {\n        clubs: cityClubs,\n        activities: cityActivities\n      }\n    })\n  }, {})\n\n  return {\n    all: {\n      clubs,\n      activities: [\n        { slug: 'all', title: 'Все' },\n        ...getOptions(keys(activitiesList), activitiesList)\n      ]\n    },\n    ...groupedDataByCity\n  }\n}\n\nexport const fetchClubs = () => http.get('/clubs')\n  .then(({ data }) => ({\n    citiesOption: getCitiesOption(data),\n    groupedByCity: groupedByCity(data)\n  }));\n\n","import React, { PureComponent } from 'react';\n\nimport Promo from './components/Promo/Promo';\nimport ClubList from './components/ClubList/ClubList';\nimport ButtonSwitcher from './components/common/ButtonSwitcher';\nimport LoadingIndicator from './components/LoadingIndicator/LoadingIndicator';\n\nimport { fetchClubs } from './services/clubs';\n\nimport './assets/scss/index.scss';\n\nclass App extends PureComponent {\n  state = {\n    citiesOption: [],\n    groupedByCity: {},\n    selectedCity: 'all',\n    selectedActivity: 'all',\n    loading: true,\n    error: false\n  };\n\n  componentDidMount() {\n    this.getClubs();\n  }\n\n  getClubs = () => {\n    fetchClubs()\n      .then(({ citiesOption, groupedByCity }) => {\n        this.setState({ citiesOption, groupedByCity, loading: false });\n      })\n      .catch(() => {\n        this.setState({ error: true, loading: false });\n      })\n  }\n\n  handleFilterClubs = (clubs, selectedActivity) => {\n    if (selectedActivity === 'all') return clubs;\n    return clubs.filter(({ activity }) => activity.some(({ slug }) => slug === selectedActivity));\n  }\n\n  handleCityChange = (selectedCity) => {\n    this.setState({ selectedCity, selectedActivity: 'all' });\n  }\n\n  handleActivityChange = (selectedActivity) => {\n    this.setState({ selectedActivity });\n  }\n\n  render() {\n    const {\n      selectedCity,\n      selectedActivity,\n      groupedByCity,\n      citiesOption,\n      loading,\n      error\n    } = this.state;\n\n    const isLoaded = !loading && !error;\n    const hasError = !loading && error;\n    const filteredClubs = isLoaded ? this.handleFilterClubs(groupedByCity[selectedCity].clubs, selectedActivity) : [];\n    return (\n      <div className=\"container\">\n        {loading && <LoadingIndicator />}\n        {hasError && (\n          <div className='text-center alert alert-danger mt-3' role=\"alert\">\n            Something occurred wrong, please reload the page\n          </div>)}\n        {isLoaded && (\n          <>\n            <Promo />\n            <ButtonSwitcher\n              onChange={this.handleCityChange}\n              active={selectedCity}\n              options={citiesOption}\n              className=\"border-primary\"\n            />\n            <hr />\n            <ButtonSwitcher\n              onChange={this.handleActivityChange}\n              active={selectedActivity}\n              options={groupedByCity[selectedCity].activities}\n              className=\"border-success\"\n            />\n            <hr />\n            <ClubList clubs={filteredClubs} />\n          </>\n        )}\n      </div >\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './assets/scss/index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}